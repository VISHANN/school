(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[474],{9975:function(e,n,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/update",function(){return a(7031)}])},7031:function(e,n,a){"use strict";a.r(n),a.d(n,{__N_SSG:function(){return i},default:function(){return o}});var t=a(5893),l=a(1857),c=a.n(l),r=a(7294);function s(e){let{index:n,changeHandler:a}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("input",{type:"file",id:"imgUploader".concat(n),onChange:a,className:"jsx-255fb3d3c226216a visually-hidden"}),(0,t.jsx)("label",{htmlFor:"imgUploader".concat(n),className:"jsx-255fb3d3c226216a",children:"Select File"}),(0,t.jsx)(c(),{id:"255fb3d3c226216a",children:".visually-hidden.jsx-255fb3d3c226216a{position:absolute;height:1px;width:1px;overflow:hidden;clip:rect(1px,1px,1px,1px)}input.visually-hidden.jsx-255fb3d3c226216a+label.jsx-255fb3d3c226216a{padding:.5rem .75rem;background:#0061ff;color:white;cursor:pointer;-webkit-box-shadow:0 4px 1rem .2rem rgba(0,0,0,.2);-moz-box-shadow:0 4px 1rem .2rem rgba(0,0,0,.2);box-shadow:0 4px 1rem .2rem rgba(0,0,0,.2);-webkit-border-radius:.2rem;-moz-border-radius:.2rem;border-radius:.2rem}"})]})}var i=!0;function o(){let[e,n]=(0,r.useState)(null),[a,l]=(0,r.useState)(null);return(0,r.useEffect)(()=>{(async function(){n(await d())})()},[]),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{children:"Upload profile photos of top performers"}),(0,t.jsx)("div",{children:e&&e.map((a,l)=>(0,t.jsxs)("div",{className:"jsx-a1847dfe0b580bc",children:[(0,t.jsx)("span",{className:"jsx-a1847dfe0b580bc",children:a.name}),(0,t.jsx)("span",{className:"jsx-a1847dfe0b580bc",children:a.percentage}),(0,t.jsxs)("span",{className:"jsx-a1847dfe0b580bc",children:[(0,t.jsx)(s,{index:l,changeHandler:a=>(function(a,t){let l=[...e];l[t].file=a.target.files[0],n(l)})(a,l)}),(0,t.jsx)("output",{className:"jsx-a1847dfe0b580bc",children:a.file?a.file.name:"No Image Selected"})]}),(0,t.jsx)(c(),{id:"a1847dfe0b580bc",children:"span.jsx-a1847dfe0b580bc{margin:.5rem;display:inline-block}"})]},l))}),(0,t.jsx)("button",{onClick:function(n){e.forEach(e=>{if(!e.file)return;let n=new FormData;n.append("image",e.file,e._id+".jpg"),fetch("http://localhost:4000/update/photo",{method:"PUT",body:n}).then(e=>{e.ok?l(!0):l(!1)}).catch(e=>console.log(e))})},children:"Upload"}),(0,t.jsx)("output",{children:null!==a&&(a?"Uploaded Successfully":"Upload Failed")})]})}async function d(){let e=new Date().getFullYear(),n=[];for(;2018!==e;){let a=await fetch("http://localhost:4000/people/".concat(e)).then(e=>e.json());a.length>0&&(n=n.concat(a)),e--}return n.sort(u),n.slice(0,12)}function u(e,n){return e.percentage<n.percentage?1:-1}o.getLayout=e=>e}},function(e){e.O(0,[774,888,179],function(){return e(e.s=9975)}),_N_E=e.O()}]);