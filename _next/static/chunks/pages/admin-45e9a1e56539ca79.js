(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{8195:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return a(6484)}])},6484:function(e,t,a){"use strict";a.r(t),a.d(t,{__N_SSG:function(){return c},default:function(){return o}});var n=a(5893),s=a(1857),r=a.n(s),l=a(7294);let i={isLocked:!1,name:"",fatherName:"",percentage:0,className:""};var c=!0;function o(e){let{isDeployed:t}=e;return t?(0,n.jsx)("h1",{children:"Only Available Locally"}):(0,n.jsxs)("div",{className:"container",children:[(0,n.jsx)("h1",{children:"Welcome, Admin"}),(0,n.jsx)(d,{})]})}function d(e){let[t,a]=(0,l.useState)(new Date().getFullYear()),[s,c]=(0,l.useState)(!1),[o,d]=(0,l.useState)(u()),[x,p]=(0,l.useState)({isVisible:!1,index:null});function b(e){let t=e.target.dataset.index,a=e.target.name,n=e.target.value;if(!0===o[t].isLocked)return;let s=[...o];s[t]={...s[t],[a]:n},d(s)}function j(e){let t=[...o];t[e].isLocked=!t[e].isLocked,d(t)}async function N(e){let t=[...o];if(t[e]._id){let a=await fetch("http://localhost:4000/people/"+t[e]._id,{method:"DELETE",headers:{"Content-Type":"application/json"}});a.ok||alert("Update failed")}t.splice(e,1),d(t),p({isVisible:!1,index:null})}return(0,n.jsxs)("div",{style:{paddingTop:"1rem"},className:"jsx-853527846f1803bf",children:[(0,n.jsxs)("div",{className:"jsx-853527846f1803bf",children:[(0,n.jsxs)("label",{className:"jsx-853527846f1803bf",children:["Session:",t-1,"-",(0,n.jsx)("input",{type:"number",value:t,onChange:function(e){let t=Number(e.target.value);fetch("http://localhost:4000/people/".concat(t)).then(e=>e.json()).then(e=>(a(t),0===e.length)?(c(!1),d(u())):(e.forEach(e=>{e.isLocked=!1}),c(!0),d(e)))},min:"2000",className:"jsx-853527846f1803bf"})]}),(0,n.jsx)("span",{className:"jsx-853527846f1803bf isUpdate",children:s?"records found":"records not found"}),(0,n.jsx)("button",{type:"button",onClick:function(){let e=[...o];e.push(i),d(e)},className:"jsx-853527846f1803bf",children:"Add row"})]}),(0,n.jsxs)("form",{onSubmit:function(e){e.preventDefault();let a=o.filter(e=>e.isLocked&&e);if(!a.length)return;let n=a.map(e=>(e.percentage=Number(e.percentage),e.year=t,e));h(n,s)},className:"jsx-853527846f1803bf",children:[(0,n.jsxs)("div",{className:"jsx-853527846f1803bf grid-row",children:[(0,n.jsx)("span",{className:"jsx-853527846f1803bf",children:"Name"}),(0,n.jsx)("span",{className:"jsx-853527846f1803bf",children:"Father's Name"}),(0,n.jsx)("span",{className:"jsx-853527846f1803bf",children:"Class"}),(0,n.jsx)("span",{className:"jsx-853527846f1803bf",children:"Percent"}),(0,n.jsx)("span",{className:"jsx-853527846f1803bf",children:"Actions"})]}),o.map((e,t)=>(0,n.jsx)("div",{className:"jsx-853527846f1803bf grid-row",children:(0,n.jsx)(m,{index:t,data:e,handleChange:b,toggleLock:j,flagDelete:()=>p({isVisible:!0,index:t})})},e._id||t)),(0,n.jsx)("button",{type:"submit",className:"jsx-853527846f1803bf",children:s?"Update":"Add New Year"}),(0,n.jsx)(f,{isVisible:x.isVisible,name:null!==x.index&&o[x.index].name,cancel:()=>p({isVisible:!1,index:null}),remove:()=>N(x.index)})]}),(0,n.jsx)(r(),{id:"853527846f1803bf",children:".grid-row.jsx-853527846f1803bf{display:grid;grid-template-rows:-webkit-min-content;grid-template-rows:min-content;grid-template-columns:repeat(5,minmax(7rem,15rem));gap:1rem}"})]})}function m(e){let{data:t,index:a,handleChange:s,toggleLock:r,flagDelete:l}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("input",{onChange:s,"data-index":a,value:t.name,type:"text",name:"name",placeholder:"name"}),(0,n.jsx)("input",{onChange:s,"data-index":a,value:t.fatherName,type:"text",name:"fatherName",placeholder:"fatherName"}),(0,n.jsxs)("span",{children:[(0,n.jsxs)("label",{children:[(0,n.jsx)("input",{"data-index":a,checked:"XII"===t.className,onChange:s,type:"checkbox",name:"className",placeholder:"className",value:"XII"}),"XII"]}),(0,n.jsxs)("label",{children:[(0,n.jsx)("input",{"data-index":a,checked:"X"===t.className,onChange:s,type:"checkbox",name:"className",placeholder:"className",value:"X"}),"X"]})]}),(0,n.jsx)("input",{onChange:s,"data-index":a,value:t.percentage,type:"number",name:"percentage",placeholder:"percentage",step:.01,min:0,max:100}),(0,n.jsxs)("div",{children:[(0,n.jsx)("button",{type:"button",onClick:()=>r(a),children:t.isLocked?"Unlock":"Lock"}),(0,n.jsx)("button",{type:"button",onClick:l,children:"D"})]})]})}function f(e){let{name:t,isVisible:a,cancel:s,remove:l}=e;return(0,n.jsxs)("div",{className:r().dynamic([["81f1908538abb16b",[a?"translateY(0)":"translateY(-100%)"]]])+" fullscreen",children:[(0,n.jsxs)("div",{className:r().dynamic([["81f1908538abb16b",[a?"translateY(0)":"translateY(-100%)"]]])+" dialog",children:[(0,n.jsxs)("p",{className:r().dynamic([["81f1908538abb16b",[a?"translateY(0)":"translateY(-100%)"]]])+" lead",children:["Do you want to permanently delete ",t,"'s record ?"]}),(0,n.jsx)("button",{type:"button",onClick:l,className:r().dynamic([["81f1908538abb16b",[a?"translateY(0)":"translateY(-100%)"]]]),children:"delete"}),(0,n.jsx)("button",{type:"button",onClick:s,className:r().dynamic([["81f1908538abb16b",[a?"translateY(0)":"translateY(-100%)"]]]),children:"cancel"})]}),(0,n.jsx)(r(),{id:"81f1908538abb16b",dynamic:[a?"translateY(0)":"translateY(-100%)"],children:".fullscreen.__jsx-style-dynamic-selector{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.2);-webkit-transform:".concat(a?"translateY(0)":"translateY(-100%)",";-moz-transform:").concat(a?"translateY(0)":"translateY(-100%)",";-ms-transform:").concat(a?"translateY(0)":"translateY(-100%)",";-o-transform:").concat(a?"translateY(0)":"translateY(-100%)",";transform:").concat(a?"translateY(0)":"translateY(-100%)",";-webkit-transition:-webkit-transform.1s linear;-moz-transition:-moz-transform.1s linear;-o-transition:-o-transform.1s linear;transition:-webkit-transform.1s linear;transition:-moz-transform.1s linear;transition:-o-transform.1s linear;transition:transform.1s linear}.dialog.__jsx-style-dynamic-selector{position:absolute;top:10%;left:50%;-webkit-transform:translatex(-50%);-moz-transform:translatex(-50%);-ms-transform:translatex(-50%);-o-transform:translatex(-50%);transform:translatex(-50%);width:30rem;padding:1rem 2rem;background:white;-webkit-border-radius:1rem;-moz-border-radius:1rem;border-radius:1rem}")})]})}function u(){let e=[];for(let t=0;t<5;t++)e.push(i);return e}async function h(e,t){let a={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:e,isUpdate:t})};fetch("http://localhost:4000/people",a).then(e=>200===e.status?alert("Update Successful"):alert("Update Unsuccessful")).catch(e=>alert(e))}o.getLayout=e=>e}},function(e){e.O(0,[774,888,179],function(){return e(e.s=8195)}),_N_E=e.O()}]);